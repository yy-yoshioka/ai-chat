{"file":"/Users/yusukeyoshioka/projects/youtube/ai-chat/ai-chat-api/src/routes/admin.ts","mappings":";;;;;;;;;;;AAAA,qCAAiC;AACjC,0CAAuC;AACvC,6CAAoD;AACpD,+CAAsD;AAEtD,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,qBAAc,EAAE,uBAAe,CAAC,CAAC;AAE5C,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,CAAO,GAAG,EAAE,GAAG,EAAE,EAAE;IAC1C,MAAM,IAAI,GAAG,MAAM,eAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QACzC,OAAO,EAAE,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE;QACxD,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;KAC/B,CAAC,CAAC;IACH,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjB,CAAC,CAAA,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,CAAO,IAAI,EAAE,GAAG,EAAE,EAAE;IAClD,MAAM,IAAI,GAAG,MAAM,eAAM,CAAC,OAAO,CAAC,OAAO,CAAC;QACxC,EAAE,EAAE,CAAC,WAAW,CAAC;QACjB,MAAM,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE;KACrB,CAAC,CAAC;IACH,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjB,CAAC,CAAA,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","names":[],"sources":["/Users/yusukeyoshioka/projects/youtube/ai-chat/ai-chat-api/src/routes/admin.ts"],"sourcesContent":["import { Router } from 'express';\nimport { prisma } from '../lib/prisma';\nimport { authMiddleware } from '../middleware/auth';\nimport { adminMiddleware } from '../middleware/admin';\n\nconst router = Router();\n\nrouter.use(authMiddleware, adminMiddleware);\n\nrouter.get('/chat-logs', async (req, res) => {\n  const logs = await prisma.chatLog.findMany({\n    include: { user: { select: { id: true, email: true } } },\n    orderBy: { createdAt: 'desc' },\n  });\n  res.json(logs);\n});\n\nrouter.get('/report/chat-logs', async (_req, res) => {\n  const logs = await prisma.chatLog.groupBy({\n    by: ['createdAt'],\n    _count: { id: true },\n  });\n  res.json(logs);\n});\n\nexport default router;\n"],"version":3}