{"version":3,"names":["express_1","cov_23h2p099mz","s","__importDefault","require","auth_1","organizationAccess_1","security_1","client_1","widgetService","__importStar","router","default","Router","get","authMiddleware","orgAccessMiddleware","requirePermission","Permission","WIDGET_READ","logDataAccess","req","res","f","__awaiter","page","limit","search","status","query","result","getWidgetsByOrganization","organizationId","b","parseInt","undefined","json","error","post","WIDGET_WRITE","widget","createWidget","Object","assign","body","message","Error","includes","getWidgetById","params","id","put","updateWidget","delete","WIDGET_DELETE","deleteWidget","send","ANALYTICS_READ","analytics","getWidgetAnalytics","exports"],"sources":["/Users/yusukeyoshioka/projects/youtube/ai-chat/ai-chat-api/src/routes/widgets.ts"],"sourcesContent":["import express from 'express';\nimport { authMiddleware as requireAuth } from '../middleware/auth';\nimport { orgAccessMiddleware as requireOrgAccess } from '../middleware/organizationAccess';\nimport { requirePermission, logDataAccess } from '../middleware/security';\nimport { Permission } from '@prisma/client';\nimport * as widgetService from '../services/widgetService';\n\nconst router = express.Router();\n\n// Get widgets by organization\nrouter.get(\n  '/',\n  requireAuth,\n  requireOrgAccess,\n  requirePermission(Permission.WIDGET_READ),\n  logDataAccess('widgets', 'SELECT'),\n  async (req, res) => {\n    try {\n      const { page, limit, search, status } = req.query;\n\n      const result = await widgetService.getWidgetsByOrganization(\n        req.organizationId!,\n        {\n          page: page ? parseInt(page as string) : undefined,\n          limit: limit ? parseInt(limit as string) : undefined,\n          search: search as string,\n          status: status as 'active' | 'inactive' | 'all',\n        }\n      );\n\n      res.json(result);\n    } catch (error) {\n      res.status(500).json({ error: 'Failed to fetch widgets' });\n    }\n  }\n);\n\n// Create widget\nrouter.post(\n  '/',\n  requireAuth,\n  requireOrgAccess,\n  requirePermission(Permission.WIDGET_WRITE),\n  logDataAccess('widgets', 'INSERT'),\n  async (req, res) => {\n    try {\n      const widget = await widgetService.createWidget({\n        ...req.body,\n        organizationId: req.organizationId!,\n      });\n      res.status(201).json(widget);\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to create widget';\n      const status =\n        message.includes('not found') || message.includes('access denied')\n          ? 400\n          : 500;\n      res.status(status).json({ error: message });\n    }\n  }\n);\n\n// Get widget by ID\nrouter.get(\n  '/:id',\n  requireAuth,\n  requireOrgAccess,\n  requirePermission(Permission.WIDGET_READ),\n  logDataAccess('widgets', 'SELECT'),\n  async (req, res) => {\n    try {\n      const widget = await widgetService.getWidgetById(\n        req.params.id,\n        req.organizationId!\n      );\n      res.json(widget);\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to fetch widget';\n      const status =\n        message.includes('not found') || message.includes('access denied')\n          ? 404\n          : 500;\n      res.status(status).json({ error: message });\n    }\n  }\n);\n\n// Update widget\nrouter.put(\n  '/:id',\n  requireAuth,\n  requireOrgAccess,\n  requirePermission(Permission.WIDGET_WRITE),\n  logDataAccess('widgets', 'UPDATE'),\n  async (req, res) => {\n    try {\n      const widget = await widgetService.updateWidget(\n        req.params.id,\n        req.organizationId!,\n        req.body\n      );\n      res.json(widget);\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to update widget';\n      const status =\n        message.includes('not found') || message.includes('access denied')\n          ? 404\n          : 500;\n      res.status(status).json({ error: message });\n    }\n  }\n);\n\n// Delete widget\nrouter.delete(\n  '/:id',\n  requireAuth,\n  requireOrgAccess,\n  requirePermission(Permission.WIDGET_DELETE),\n  logDataAccess('widgets', 'DELETE'),\n  async (req, res) => {\n    try {\n      await widgetService.deleteWidget(req.params.id, req.organizationId!);\n      res.status(204).send();\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : 'Failed to delete widget';\n      const status =\n        message.includes('not found') || message.includes('access denied')\n          ? 404\n          : 500;\n      res.status(status).json({ error: message });\n    }\n  }\n);\n\n// Get widget analytics\nrouter.get(\n  '/:id/analytics',\n  requireAuth,\n  requireOrgAccess,\n  requirePermission(Permission.ANALYTICS_READ),\n  logDataAccess('analytics', 'SELECT'),\n  async (req, res) => {\n    try {\n      const analytics = await widgetService.getWidgetAnalytics(\n        req.params.id,\n        req.organizationId!\n      );\n      res.json(analytics);\n    } catch (error) {\n      const message =\n        error instanceof Error\n          ? error.message\n          : 'Failed to fetch widget analytics';\n      const status =\n        message.includes('not found') || message.includes('access denied')\n          ? 404\n          : 500;\n      res.status(status).json({ error: message });\n    }\n  }\n);\n\nexport default router;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}