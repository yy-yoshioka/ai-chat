{"version":3,"names":["cov_zz0183a2a","actualCoverage","express_1","s","require","prisma_1","auth_1","admin_1","router","Router","use","authMiddleware","adminMiddleware","get","req","res","f","__awaiter","logs","prisma","chatLog","findMany","include","user","select","id","email","orderBy","createdAt","json","_req","groupBy","by","_count","exports","default"],"sources":["/Users/yusukeyoshioka/projects/youtube/ai-chat/ai-chat-api/src/routes/admin.ts"],"sourcesContent":["import { Router } from 'express';\nimport { prisma } from '../lib/prisma';\nimport { authMiddleware } from '../middleware/auth';\nimport { adminMiddleware } from '../middleware/admin';\n\nconst router = Router();\n\nrouter.use(authMiddleware, adminMiddleware);\n\nrouter.get('/chat-logs', async (req, res) => {\n  const logs = await prisma.chatLog.findMany({\n    include: { user: { select: { id: true, email: true } } },\n    orderBy: { createdAt: 'desc' },\n  });\n  res.json(logs);\n});\n\nrouter.get('/report/chat-logs', async (_req, res) => {\n  const logs = await prisma.chatLog.groupBy({\n    by: ['createdAt'],\n    _count: { id: true },\n  });\n  res.json(logs);\n});\n\nexport default router;\n"],"mappings":"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","ignoreList":[]}